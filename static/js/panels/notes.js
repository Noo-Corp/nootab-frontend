function loadNote(){let e=JSON.parse(localStorage.getItem("panel-order")).length,{panelIndex:t}=getUrlParams(),n=JSON.parse(localStorage.getItem("vals-note"))||[],o=JSON.parse(localStorage.getItem("orders-note"))||Array(e),l=n[o[t]-1],r=document.getElementById("note-editor"),i=document.getElementById("main-title");l?(i.innerText=l[0]||"Untitled",r.value=l[1]||""):(i.innerText="Untitled",r.value="")}function saveNote(e){let t=JSON.parse(localStorage.getItem("vals-note"))||[],n=JSON.parse(localStorage.getItem("orders-note")),o,l=[document.getElementById("main-title").innerText,document.getElementById("note-editor").value];n[e]?t[n[e]-1]=l:(t.push(l),n[e]=t.length,localStorage.setItem("orders-note",JSON.stringify(n))),localStorage.setItem("vals-note",JSON.stringify(t));let{isPopped:r}=getUrlParams();"true"===r&&loadSidepanel("note")}window.addEventListener("load",function(){let{panelIndex:e,isPopped:t}=getUrlParams();loadNote(),"true"===t&&loadSidepanel("note"),document.getElementById("note-editor").addEventListener("input",()=>saveNote(e)),document.getElementById("main-title").addEventListener("input",()=>saveNote(e))}),document.addEventListener("keydown",function(e){(e.ctrlKey||e.metaKey)&&"s"===e.key&&e.preventDefault()});