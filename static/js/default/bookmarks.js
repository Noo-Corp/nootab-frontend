function initUrls(){let{urls:t,values:e,launch:l}=getUrlsFromStorage(),n=document.getElementById("urlButtons"),s=document.getElementById("bookmarkTableBody");n.innerHTML="",s.innerHTML="",t.forEach((r,a)=>{let o=document.createElement("tr"),i=document.createElement("td"),d=document.createElement("button");!0==l[a]?d.innerHTML="&#9733;":d.innerHTML="&#9734;",d.onclick=t=>toggleLaunch(t,a),d.classList.add("launch-link"),i.appendChild(d),o.appendChild(i);let u=document.createElement("td"),c=document.createElement("input");c.value=a+1,c.className="orderInput",u.appendChild(c),o.appendChild(u),$(c).spinner({step:-1,min:1,max:t.length}).siblings(".ui-spinner-up, .ui-spinner-down").addClass("spinner-bookmark-button"),$(c).on("change",function(){let t=parseInt(this.value)-1;updateOrder(a,t)}),$(c).on("keydown",function(t){if("ArrowUp"===t.key||"ArrowDown"===t.key){let e=parseInt(this.value)-1;updateOrder(a,e)}});let p=document.createElement("td");p.innerText=e[a],o.appendChild(p);let m=document.createElement("td"),g=document.createElement("button");g.innerHTML="&#9998;",g.onclick=t=>editBookmark(t,a),g.classList.add("edit-link"),m.appendChild(g);let y=document.createElement("button");y.innerHTML="&#10006;",y.onclick=t=>deleteUrl(t,a),y.classList.add("delete-link"),m.appendChild(y),o.appendChild(m),s.appendChild(o);let h=document.createElement("button");h.className="urlButton",!0==l[a]&&h.classList.add("wide"),setupUrlButtons(h,r,e[a]),n.append(h)}),$(".spinner-bookmark-button").click(function(t){t.stopPropagation(),$(this).siblings("input").change()}),updateURLVisibility()}function addUrlButton(t){t.stopPropagation();var e=prompt("Enter Bookmark URL:");if(null!=e&&""!==e.trim()){var l=prompt("Enter Bookmark Name (Optional):");(""==l.trim()||null==l)&&(l=e.replace(/^(https?:\/\/)?(www\.)?/,"").substring(0,8),e.length>8&&(l+=".."));let n=document.createElement("button");n.className="urlButton",setupUrlButtons(n,e,l);let{urls:s,values:r,launch:a}=getUrlsFromStorage();s.push(e),r.push(l),a.push(!1),saveUrlsToStorage(s,r,a)}initUrls(),updateURLVisibility()}function setupUrlButtons(t,e,l){t.dataset.value=l,t.dataset.url=e;var n=e;e.startsWith("http://")||e.startsWith("https://")||(n="https://"+e),t.onclick=function(){window.location.href=n},t.innerText=l}function updateOrder(t,e){let{urls:l,values:n,launch:s}=getUrlsFromStorage();if(e<0||e>=l.length||t===e)return;let r=l.splice(t,1)[0],a=n.splice(t,1)[0],o=s.splice(t,1)[0];l.splice(e,0,r),n.splice(e,0,a),s.splice(e,0,o),saveUrlsToStorage(l,n,s),initUrls()}function getUrlsFromStorage(){let t=JSON.parse(localStorage.getItem("urls"))||[],e=JSON.parse(localStorage.getItem("url_values"))||[],l=JSON.parse(localStorage.getItem("url_launch"))||[];return{urls:t,values:e,launch:l}}function saveUrlsToStorage(t,e,l){localStorage.setItem("urls",JSON.stringify(t)),localStorage.setItem("url_values",JSON.stringify(e)),localStorage.setItem("url_launch",JSON.stringify(l))}function updateURLVisibility(){let t=document.getElementById("urlButtons"),e=t.getElementsByClassName("urlButton").length>0;e?(t.classList.add("hasSeturlButtons"),document.getElementById("openAllUrlsButton").style.display="block",document.getElementById("urlDivider").style.display="block",document.querySelector("#editUrlButton").classList.remove("init"),document.getElementById("bookmarkTable").style.display="block ruby",document.getElementById("addUrlButton").style.marginBottom="2px",document.getElementById("addUrlButton").style.marginTop="20px"):(t.classList.remove("hasSeturlButtons"),document.getElementById("openAllUrlsButton").style.display="none",document.getElementById("urlDivider").style.display="none",document.querySelector("#editUrlButton").classList.add("init"),document.getElementById("bookmarkTable").style.display="none",document.getElementById("addUrlButton").style.marginBottom="20px",document.getElementById("addUrlButton").style.marginTop="12px")}function goToUrl(t){var e=prompt("Enter the URL:");if(""!==e&&null!=e){var l=prompt("(Optional) Enter the name:");(null==l||""==l)&&(l=e.replace(/^(https?:\/\/)?(www\.)?/,"").substring(0,8),e.length>8&&(l+="..")),setupUrlButtons(t,e,l);let{urls:n,values:s,launch:r}=getUrlsFromStorage();n.push(e),s.push(l),saveUrlsToStorage(n,s,r)}}function openAllUrls(){let{urls:t,values:e,launch:l}=getUrlsFromStorage(),n=document.querySelectorAll(".urlButton");if(n.length>0){for(let s=0;s<n.length;s++)if(!0==l[s]){var r=n[s].dataset.url;""!==r&&null!=r&&(r.startsWith("http://")||r.startsWith("https://")||(r="https://"+r),window.open(r,"_blank"))}}}function toggleLaunch(t,e){t.stopPropagation();let{urls:l,values:n,launch:s}=getUrlsFromStorage();s[e]=!s[e],localStorage.setItem("url_launch",JSON.stringify(s)),initUrls()}function editBookmark(t,e){t.stopPropagation();let{urls:l,values:n,launch:s}=getUrlsFromStorage(),r=prompt("Edit Bookmark URL:",l[e]),a=prompt("Edit Bookmark Name:",n[e]);r&&""!==r&&(l[e]=r,n[e]=a||a.replace(/^(https?:\/\/)?(www\.)?/,"").substring(0,8),saveUrlsToStorage(l,n,s),initUrls())}function deleteUrl(t,e){t.stopPropagation();let{urls:l,values:n,launch:s}=getUrlsFromStorage();l.splice(e,1),n.splice(e,1),s.splice(e,1),saveUrlsToStorage(l,n,s),initUrls()}window.addEventListener("load",function(){let t=document.querySelector("#bookmarksModal"),e=document.querySelector("#close-links");initUrls(),document.querySelector("#editUrlButton").addEventListener("click",function(){t.classList.add("show"),document.getElementById("modalOverlay").classList.add("active")}),e.addEventListener("click",function(e){e.preventDefault(),t.classList.remove("show"),document.getElementById("modalOverlay").classList.remove("active")}),document.addEventListener("click",function(t){let e=document.querySelector("#bookmarksModal"),l=e.classList.contains("show");if(l){let n=t.target.closest("#bookmarksModal")||"editUrlButton"===t.target.id;n||(e.classList.remove("show"),document.getElementById("modalOverlay").classList.remove("active"))}}),document.addEventListener("keydown",function(t){let e=document.querySelector("#bookmarksModal");"Escape"===t.key&&e.classList.contains("show")&&(e.classList.remove("show"),document.getElementById("modalOverlay").classList.remove("active"))})});