function initUrls(){let{urls:t,values:e,launch:l}=getUrlsFromStorage(),n=document.getElementById("urlButtons"),s=document.getElementById("bookmarkTableBody");n.innerHTML="",s.innerHTML="",t.forEach((r,o)=>{let a=document.createElement("tr"),i=document.createElement("td"),u=document.createElement("button");!0==l[o]?u.innerHTML="&#9733;":u.innerHTML="&#9734;",u.onclick=t=>toggleLaunch(t,o),u.classList.add("launch-link"),i.appendChild(u),a.appendChild(i);let d=document.createElement("td"),c=document.createElement("input");c.value=o+1,c.className="orderInput",d.appendChild(c),a.appendChild(d),$(c).spinner({step:-1,min:1,max:t.length}).siblings(".ui-spinner-up, .ui-spinner-down").addClass("spinner-bookmark-button"),$(c).on("change",function(){let t=parseInt(this.value)-1;updateOrder(o,t)}),$(c).on("keydown",function(t){if("ArrowUp"===t.key||"ArrowDown"===t.key){let e=parseInt(this.value)-1;updateOrder(o,e)}});let p=document.createElement("td");p.innerText=e[o],a.appendChild(p);let m=document.createElement("td"),g=document.createElement("button");g.innerHTML="&#9998;",g.onclick=t=>editBookmark(t,o),g.classList.add("edit-link"),m.appendChild(g);let h=document.createElement("button");h.innerHTML="&#10006;",h.onclick=t=>deleteUrl(t,o),h.classList.add("delete-link"),m.appendChild(h),a.appendChild(m),s.appendChild(a);let y=document.createElement("button");y.className="urlButton",!0==l[o]&&y.classList.add("wide"),setupUrlButtons(y,r,e[o]),n.append(y)}),$(".spinner-bookmark-button").click(function(t){t.stopPropagation(),$(this).siblings("input").change()}),updateURLVisibility()}function addUrlButton(t){t.stopPropagation();var e=prompt("Enter Bookmark URL:");if(null!=e&&""!==e.trim()){var l=prompt("Enter Bookmark Name (Optional):");(""==l.trim()||null==l)&&(l=e.replace(/^(https?:\/\/)?(www\.)?/,"").substring(0,8),e.length>8&&(l+=".."));let n=document.createElement("button");n.className="urlButton",setupUrlButtons(n,e,l);let{urls:s,values:r,launch:o}=getUrlsFromStorage();s.push(e),r.push(l),o.push(!1),saveUrlsToStorage(s,r,o)}initUrls(),updateURLVisibility()}function setupUrlButtons(t,e,l){t.dataset.value=l,t.dataset.url=e;var n=e;e.startsWith("http://")||e.startsWith("https://")||(n="https://"+e),t.onclick=function(){window.location.href=n},t.innerText=l}function updateOrder(t,e){let{urls:l,values:n,launch:s}=getUrlsFromStorage();if(e<0||e>=l.length||t===e)return;let r=l.splice(t,1)[0],o=n.splice(t,1)[0],a=s.splice(t,1)[0];l.splice(e,0,r),n.splice(e,0,o),s.splice(e,0,a),saveUrlsToStorage(l,n,s),initUrls()}function getUrlsFromStorage(){let t=JSON.parse(localStorage.getItem("urls"))||[],e=JSON.parse(localStorage.getItem("url_values"))||[],l=JSON.parse(localStorage.getItem("url_launch"))||[];return{urls:t,values:e,launch:l}}function saveUrlsToStorage(t,e,l){localStorage.setItem("urls",JSON.stringify(t)),localStorage.setItem("url_values",JSON.stringify(e)),localStorage.setItem("url_launch",JSON.stringify(l))}function updateURLVisibility(){let t=document.getElementById("urlButtons"),e=t.getElementsByClassName("urlButton").length>0;e?(t.classList.add("hasSeturlButtons"),document.getElementById("openAllUrlsButton").style.display="block",document.getElementById("urlDivider").style.display="block"):(t.classList.remove("hasSeturlButtons"),document.getElementById("openAllUrlsButton").style.display="none",document.getElementById("urlDivider").style.display="none")}function goToUrl(t){var e=prompt("Enter the URL:");if(""!==e&&null!=e){var l=prompt("(Optional) Enter the name:");(""==l||null==l)&&(l=e.replace(/^(https?:\/\/)?(www\.)?/,"").substring(0,8),e.length>8&&(l+="..")),setupUrlButtons(t,e,l);let{urls:n,values:s,launch:r}=getUrlsFromStorage();n.push(e),s.push(l),saveUrlsToStorage(n,s,r)}}function openAllUrls(){let{urls:t,values:e,launch:l}=getUrlsFromStorage(),n=document.querySelectorAll(".urlButton");if(n.length>0){for(let s=0;s<n.length;s++)if(!0==l[s]){var r=n[s].dataset.url;""!==r&&null!=r&&(r.startsWith("http://")||r.startsWith("https://")||(r="https://"+r),window.open(r,"_blank"))}}}function toggleLaunch(t,e){t.stopPropagation();let{urls:l,values:n,launch:s}=getUrlsFromStorage();s[e]=!s[e],localStorage.setItem("url_launch",JSON.stringify(s)),initUrls()}function editBookmark(t,e){t.stopPropagation();let{urls:l,values:n,launch:s}=getUrlsFromStorage(),r=prompt("Edit Bookmark URL:",l[e]),o=prompt("Edit Bookmark Name:",n[e]);r&&""!==r&&(l[e]=r,n[e]=o||o.replace(/^(https?:\/\/)?(www\.)?/,"").substring(0,8),saveUrlsToStorage(l,n,s),initUrls())}function deleteUrl(t,e){t.stopPropagation();let{urls:l,values:n,launch:s}=getUrlsFromStorage();l.splice(e,1),n.splice(e,1),s.splice(e,1),saveUrlsToStorage(l,n,s),initUrls()}window.addEventListener("load",function(){let t=document.querySelector("#editUrlButton"),e=document.querySelector("#bookmarksModal"),l=document.querySelector("#close-links");initUrls(),t.addEventListener("click",function(){e.classList.add("show"),document.getElementById("modalOverlay").style.display="block"}),l.addEventListener("click",function(t){t.preventDefault(),e.classList.remove("show"),document.getElementById("modalOverlay").style.display="none"}),document.addEventListener("click",function(t){let e=document.querySelector("#bookmarksModal"),l=e.classList.contains("show");if(l){let n=t.target.closest("#bookmarksModal")||"editUrlButton"===t.target.id;n||(e.classList.remove("show"),document.getElementById("modalOverlay").style.display="none")}}),document.addEventListener("keydown",function(t){let e=document.querySelector("#bookmarksModal");"Escape"===t.key&&e.classList.contains("show")&&(e.classList.remove("show"),document.getElementById("modalOverlay").style.display="none")})});