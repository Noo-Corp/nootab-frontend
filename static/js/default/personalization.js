function resetToSavedColours(){var e=localStorage.getItem("colour-main"),t=localStorage.getItem("colour-main-empty"),o=localStorage.getItem("colour-main-hover"),r=localStorage.getItem("colour-main-text"),l=localStorage.getItem("colour-secondary"),c=localStorage.getItem("colour-secondary-hover"),s=localStorage.getItem("colour-secondary-text");document.documentElement.style.setProperty("--main",e),document.documentElement.style.setProperty("--empty",t),document.documentElement.style.setProperty("--hover",o),document.documentElement.style.setProperty("--text",r),document.documentElement.style.setProperty("--secondary",l),document.documentElement.style.setProperty("--secondaryhover",c),document.documentElement.style.setProperty("--secondarytext",s),updateIframesStyles()}function updateIframesStyles(){let e=document.querySelectorAll("iframe");e.forEach(function(e){let t=e.contentWindow.document;if(t){let o=getComputedStyle(document.documentElement).getPropertyValue("--modeback"),r=getComputedStyle(document.documentElement).getPropertyValue("--modetext"),l=getComputedStyle(document.documentElement).getPropertyValue("--modetext2"),c=getComputedStyle(document.documentElement).getPropertyValue("--bodyback"),s=getComputedStyle(document.documentElement).getPropertyValue("--main"),n=getComputedStyle(document.documentElement).getPropertyValue("--backtext"),a=getComputedStyle(document.documentElement).getPropertyValue("--empty"),u=getComputedStyle(document.documentElement).getPropertyValue("--hover"),m=getComputedStyle(document.documentElement).getPropertyValue("--text"),y=getComputedStyle(document.documentElement).getPropertyValue("--secondary"),d=getComputedStyle(document.documentElement).getPropertyValue("--secondaryhover"),i=getComputedStyle(document.documentElement).getPropertyValue("--secondarytext");t.documentElement.style.setProperty("--modeback",o),t.documentElement.style.setProperty("--modetext",r),t.documentElement.style.setProperty("--modetext2",l),t.documentElement.style.setProperty("--bodyback",c),t.documentElement.style.setProperty("--main",s),t.documentElement.style.setProperty("--backtext",n),t.documentElement.style.setProperty("--empty",a),t.documentElement.style.setProperty("--hover",u),t.documentElement.style.setProperty("--text",m),t.documentElement.style.setProperty("--secondary",y),t.documentElement.style.setProperty("--secondaryhover",d),t.documentElement.style.setProperty("--secondarytext",i)}})}function getTextColour(e){let t=parseInt(e.substr(1,2),16),o=parseInt(e.substr(3,2),16),r=parseInt(e.substr(5,2),16);return .299*t+.587*o+.114*r>186?"#424242":"#F5F5F5"}function hexToHsv(e){var t,o,r,l=parseInt(e.substring(1,3),16),c=parseInt(e.substring(3,5),16),s=parseInt(e.substring(5,7),16),n=Math.max(l,c,s),a=n-Math.min(l,c,s);return o=0===n?0:a/n,0===a?t=0:(t=l===n?(c-s)/a:c===n?2+(s-l)/a:4+(l-c)/a,(t*=60)<0&&(t+=360)),{h:t,s:o,v:r=n/255}}function hsvToHex(e){"string"==typeof e&&(e=JSON.parse(e));var t,o,r,l=e.v*e.s,c=l*(1-Math.abs(e.h/60%2-1)),s=e.v-l;return e.h>=0&&e.h<60?(t=l,o=c,r=0):e.h>=60&&e.h<120?(t=c,o=l,r=0):e.h>=120&&e.h<180?(t=0,o=l,r=c):e.h>=180&&e.h<240?(t=0,o=c,r=l):e.h>=240&&e.h<300?(t=c,o=0,r=l):(t=l,o=0,r=c),t=Math.round((t+s)*255),"#"+(16777216+(t<<16)+((o=Math.round((o+s)*255))<<8)+(r=Math.round((r+s)*255))).toString(16).slice(1)}function generatePalette(e,t,o){var r={};if(o){var l=e.v-.21;l<0&&(l=e.v+.21);var c=e.v+.08;if(c>1&&(c=e.v-.08),10>Math.abs(98.5-e.h))var s=Math.abs(360-e.h);else var s=Math.abs(197-e.h);var n=e.v+.08;n>1&&(n=e.v-.08),r.c1={h:e.h,s:e.s,v:l},r.c2={h:e.h,s:e.s,v:c},r.c3={h:s,s:e.s,v:e.v},r.c4={h:s,s:e.s,v:n}}else{if(e){var l=e.v-.21;l<0&&(l=e.v+.21);var c=e.v+.08;c>1&&(c=e.v-.08),r.c1={h:e.h,s:e.s,v:l},r.c2={h:e.h,s:e.s,v:c}}if(t){var s=t.h,n=t.v+.08;n>1&&(n=t.v-.08),r.c3={h:s,s:t.s,v:t.v},r.c4={h:s,s:t.s,v:n}}}return r}window.addEventListener("load",function(){let e="#F5F5F5",t="#424242";var o="/static/images/logo-awake-hd.png",r="/static/images/logo-asleep-hd.png",l="/static/images/dark-mode-hd.png",c="/static/images/light-mode-hd.png";[{key:"colour-main-back-text",cssVar:"--backtext",defaultValue:"#6f6f6f"},{key:"colour-mode-back",cssVar:"--modeback",defaultValue:"#F5F5F5"},{key:"colour-mode-text",cssVar:"--modetext",defaultValue:"#424242"},{key:"colour-mode-text-2",cssVar:"--modetext2",defaultValue:"#6f6f6f"},{key:"colour-main-body-back",cssVar:"--bodyback",defaultValue:"#E8E8E8"},{key:"colour-main",cssVar:"--main",defaultValue:"#ed6461"},{key:"colour-main-empty",cssVar:"--empty",defaultValue:"#b74d4b"},{key:"colour-main-hover",cssVar:"--hover",defaultValue:"#d95b59"},{key:"colour-main-text",cssVar:"--text",defaultValue:"#F5F5F5"},{key:"colour-secondary",cssVar:"--secondary",defaultValue:"#00baff"},{key:"colour-secondary-hover",cssVar:"--secondaryhover",defaultValue:"#00abeb"},{key:"colour-secondary-text",cssVar:"--secondarytext",defaultValue:"#F5F5F5"}].forEach(({key:e,cssVar:t,defaultValue:o})=>{let r=localStorage.getItem(e);r||(r=o),localStorage.setItem(e,r),document.documentElement.style.setProperty(t,r)}),updateIframesStyles();let s=document.querySelector(".colour-picker-button"),n=document.querySelector("#colourPickerContent"),a=document.querySelector("#colourPickerSubmit"),u=document.querySelector("#colourRandomSelect"),m=document.querySelector("#close-colour"),y=document.querySelector("#primary-colour-picker"),d=document.querySelector("#secondary-colour-picker"),i=document.querySelector("#primary-colour-picker-hidden"),p=document.querySelector("#secondary-colour-picker-hidden");document.querySelectorAll(".colour-picker-tab").forEach(function(e){e.addEventListener("click",function(){let t=e.querySelector("theme-colour-picker");if(t){let o=t.shadowRoot,r=o.querySelector(".colour-picker-button");r&&r.click()}})}),s.addEventListener("click",function(){var e=localStorage.getItem("colour-main"),t=localStorage.getItem("colour-secondary");i.value=e,p.value=t,document.querySelector("#primary-colour-picker").shadowRoot.querySelector(".button-colour").style.background=e,document.querySelector("#secondary-colour-picker").shadowRoot.querySelector(".button-colour").style.background=t,n.classList.add("show"),document.getElementById("modalOverlay").classList.add("active")}),y.addEventListener("change",e=>{i.value=e.detail.hex;var t=i.value,o=hexToHsv(t),r=generatePalette(o,"",0);document.documentElement.style.setProperty("--main",t),document.documentElement.style.setProperty("--empty",hsvToHex(r.c1)),document.documentElement.style.setProperty("--hover",hsvToHex(r.c2)),document.documentElement.style.setProperty("--text",getTextColour(t)),updateIframesStyles()}),d.addEventListener("change",e=>{p.value=e.detail.hex;var t=hexToHsv(p.value),o=generatePalette("",t,0);document.documentElement.style.setProperty("--secondary",hsvToHex(o.c3)),document.documentElement.style.setProperty("--secondaryhover",hsvToHex(o.c4)),document.documentElement.style.setProperty("--secondarytext",getTextColour(hsvToHex(o.c3))),updateIframesStyles()}),a.addEventListener("click",function(e){e.preventDefault(),localStorage.setItem("colour-main",document.documentElement.style.getPropertyValue("--main")),localStorage.setItem("colour-secondary",document.documentElement.style.getPropertyValue("--secondary")),localStorage.setItem("colour-main-empty",document.documentElement.style.getPropertyValue("--empty")),localStorage.setItem("colour-main-hover",document.documentElement.style.getPropertyValue("--hover")),localStorage.setItem("colour-main-text",document.documentElement.style.getPropertyValue("--text")),localStorage.setItem("colour-secondary-hover",document.documentElement.style.getPropertyValue("--secondaryhover")),localStorage.setItem("colour-secondary-text",document.documentElement.style.getPropertyValue("--secondarytext"));let t=document.querySelector(".panel.assets")||null;if(t){let o=t.querySelector("iframe");o.src=o.src}let r=document.querySelector(".panel.trade")||null;if(r){let l=r.querySelector("iframe");l.src=l.src}n.classList.remove("show"),document.getElementById("modalOverlay").classList.remove("active")}),u.addEventListener("click",function(e){function t(e){let t=e.toString(16);return 1===t.length?"0"+t:t}e.preventDefault();var o="#"+t(Math.floor(256*Math.random()))+t(Math.floor(256*Math.random()))+t(Math.floor(256*Math.random())),r=hexToHsv(o),l=generatePalette(r,"",1);secondary_colour_active=hsvToHex(l.c3),document.documentElement.style.setProperty("--main",o),document.documentElement.style.setProperty("--text",getTextColour(o)),document.documentElement.style.setProperty("--empty",hsvToHex(l.c1)),document.documentElement.style.setProperty("--hover",hsvToHex(l.c2)),document.documentElement.style.setProperty("--secondarytext",getTextColour(secondary_colour_active)),document.documentElement.style.setProperty("--secondary",secondary_colour_active),document.documentElement.style.setProperty("--secondaryhover",hsvToHex(l.c4)),updateIframesStyles(),i.value=o,p.value=secondary_colour_active,document.querySelector("#primary-colour-picker").shadowRoot.querySelector(".button-colour").style.background=o,document.querySelector("#secondary-colour-picker").shadowRoot.querySelector(".button-colour").style.background=secondary_colour_active,this.blur()}),m.addEventListener("click",function(e){e.preventDefault(),resetToSavedColours(),n.classList.remove("show"),document.getElementById("modalOverlay").classList.remove("active")});let v=document.querySelector("#darkmode-button"),E=document.querySelector("#darkmode-button img"),h=document.querySelector("#logo img"),g=localStorage.getItem("colour-mode-back");g==t?(E.src=c,h.src=r):(E.src=l,h.src=o),v.addEventListener("click",function(s){s.preventDefault();let n=document.querySelector(".panel.assets")||null;if(n){let a=n.querySelector("iframe");a.src=a.src}let u=document.querySelector(".panel.trade")||null;if(u){let m=u.querySelector("iframe");m.src=m.src}let y=localStorage.getItem("colour-mode-back");y==e?(E.src=c,h.src=r,document.documentElement.style.setProperty("--bodyback","#363636"),document.documentElement.style.setProperty("--modeback",t),document.documentElement.style.setProperty("--modetext",e),document.documentElement.style.setProperty("--modetext2","#999"),localStorage.setItem("colour-main-body-back",document.documentElement.style.getPropertyValue("--bodyback")),localStorage.setItem("colour-mode-back",document.documentElement.style.getPropertyValue("--modeback")),localStorage.setItem("colour-mode-text",document.documentElement.style.getPropertyValue("--modetext")),localStorage.setItem("colour-mode-text-2",document.documentElement.style.getPropertyValue("--modetext2")),updateIframesStyles()):(E.src=l,h.src=o,document.documentElement.style.setProperty("--bodyback","#E8E8E8"),document.documentElement.style.setProperty("--modeback",e),document.documentElement.style.setProperty("--modetext",t),document.documentElement.style.setProperty("--modetext2","#6f6f6f"),localStorage.setItem("colour-main-body-back",document.documentElement.style.getPropertyValue("--bodyback")),localStorage.setItem("colour-mode-back",document.documentElement.style.getPropertyValue("--modeback")),localStorage.setItem("colour-mode-text",document.documentElement.style.getPropertyValue("--modetext")),localStorage.setItem("colour-mode-text-2",document.documentElement.style.getPropertyValue("--modetext2")),updateIframesStyles())})}),document.addEventListener("click",function(e){let t=document.querySelector("#colourPickerContent"),o=t.classList.contains("show");if(o){let r=e.target.closest("#colourPickerContent")||e.target.classList.contains("colour-picker-button")||"colour-picker-image"===e.target.id;r||(resetToSavedColours(),t.classList.remove("show"),document.getElementById("modalOverlay").classList.remove("active"))}}),document.addEventListener("keydown",function(e){let t=document.querySelector("#colourPickerContent");"Escape"===e.key&&t.classList.contains("show")&&(resetToSavedColours(),t.classList.remove("show"),document.getElementById("modalOverlay").classList.remove("active"))});